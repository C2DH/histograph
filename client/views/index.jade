html
  head
    title!= title
    
    link(href='/css/bootstrap.min.css', rel='stylesheet')
    link(href='/css/font-awesome.min.css', rel='stylesheet')
    link(href='/css/perfect-scrollbar.min.css', rel='stylesheet')
    link(href='/css/annotator.css', rel='stylesheet')
    link(href='/css/annotorious.css', rel='stylesheet')
    link(href='/css/codemirror.css', rel='stylesheet')

    link(href='/css/style.css', rel='stylesheet')
  
    script(src='/socket.io/socket.io.js')
    script(src='//use.typekit.net/fwe7tir.js')

    script.
      try{Typekit.load();}catch(e){}



  body(ng-app='histograph')
    script(type='text/javascript').
      var socket = io();
    
    script(type='text/ng-template', id='suggest.html').
      <a ng-if="match.model.type == 'resource'" href="#/r/{{match.model.id}}">
        <span bind-html-unsafe="match.model.title | typeaheadHighlight:query"></span>
      </a>
      
    script(type='text/ng-template', id='inquirer.html').
      <div>ge</div>
      <div class="form-group">
        <label>Popup Title:</label>
        this is a test
      </div>

    div(ng-controller='CoreCtrl')
    
      header 
        if user.username
           
          
          div(class='row')
            div(class='col-sm-4')
              a(href='#/') hg
              a(href='#/profile')
                img(src=user.picture)
                span!=user.username
            div(class='col-sm-4')
              div(id='search-field')
                div(class='input-group')
                  input(type='text', ng-model='asyncSelected', class='form-control', placeholder='Search for...', typeahead='item for items in suggest($viewValue)', typeahead-wait-ms='500', typeahead-template-url='suggest.html')
                  span(class='input-group-btn')
                    button(class='btn btn-default', type='button') search
            div(class='col-sm-2')
              a(href='#')
                span settings
            div(class='col-sm-2')
              a(href='#')
                span logout
          div(id='history')
            div(history='', trails='trails')
              
        else
          a(href='#/')  hg
          
      if !user.username
          div(id='login')
            form
              a(ng-href='/auth/twitter?next={{locationPath}}', class='btn btn-default') signup with twitter
              a(ng-href='/auth/google?next={{locationPath}}', class='btn btn-default') signup with google plus
      else
        //- div(id='see-also-header') related stuff
        div(ng-view, class='view')
        div(id='milkyway', sigma, graph='graph', class='{{currentCtrl == "AllShortestPathsCtrl"? "extended": ""}}', controller='currentCtrl' redirect='redirect(path)')
        div(id='timeline', timeline, graph='graph')
        div(id='pop', popit, target="target", redirect='redirect(path)', comment="startCommenting(item, tag, hashtag)", queue="queue(item)")
          div(class='action-group')
            a(class=' action', title='visit', data-action='link', tooltip='visit entity page')
              span(class='fa fa-link')
            a(class=' action', title='vote up')
              span(class='fa fa-thumbs-o-down')
            a(class=' action queue', tooltip="add to your current playlist", data-action='queue')
              span(class='fa fa-play-circle-o')
            a(class=' action', title='comment', data-action='comment')
              span(class='fa fa-comment-o')
        div(id='inquirer', class="{{commenting? 'commenting': ''}}")
          div
            img(class='user-picture', ng-src='{{user.picture}}')
            p {{user.username}} {{comment.tags}}
          div(ng-model='comment.text', ui-codemirror="{lineNumbers: false,theme:'twilight',lineWrapping : true,mode: 'Smalltalk'}")
          div(style='text-align:center')
            div(class='btn-group', role='group', aria-label='...')
              button(class='btn btn-primary', ng-click='postComment()') comment
              button(ng-if='comment.tags.length' class='btn btn-default') signale
              button(class='btn btn-default', ng-click='stopCommenting()') close
        
        div(id='playlist', ng-class='queueStatus')
          div(id='playlist-resume', ng-click='toggleQueue()')
            span(class="fa fa-angle-up")
          div(ng-if='playlist.length == 0') ... select some element to start playlist ...
          div(id='playlist-queue')
            div(ng-repeat='item in playlist') ch
          
          div(id='playlist-actions')
          
    script(src='/js/lib/jquery-2.1.3.min.js') 
    script(src='/js/lib/d3.min.js')  
    script(src='/js/lib/codemirror.js')
    script(src='/js/lib/annotator.min.js')
    script(src='/js/lib/annotorious.min.js')
    script(src='/js/lib/annotorious-merge.js')   
    script(src='/js/lib/marked.min.js')
    script(src='/js/lib/moment.min.js')
    script(src='/js/lib/sigma.min.js')
    script(src='/js/lib/sigma.layout.forceAtlas2.min.js')
    script(src='/js/lib/sigma.statistics.HITS.js')
    script(src='/js/lib/perfect-scrollbar.min.js')
    script(src='/js/lib/perfect-scrollbar.with-mousewheel.min.js')
    script(src='/js/lib/angular.min.js')
    script(src='/js/lib/angular-route.min.js')
    script(src='/js/lib/angular-resource.min.js')
    script(src='/js/lib/angular-cookies.min.js')
    
    script(src='/js/lib/ui-codemirror.min.js')
    script(src='/js/lib/ui-bootstrap-tpls.min.js')
    script(src='/js/lib/angular-perfect-scrollbar.js')
    
    script(src='/js/app.js')
    script(src='/js/services.js')
    script(src='/js/filters.js')
    
    script(src='/js/controllers/core.js')
    script(src='/js/controllers/index.js')
    script(src='/js/controllers/resource.js')
    script(src='/js/controllers/entity.js')
    script(src='/js/controllers/collection.js')
    script(src='/js/controllers/all-shortest-paths.js')
        
    script(src='/js/directives/annotator.js') 
    script(src='/js/directives/annotorious.js') 
    script(src='/js/directives/sigma.js')   
    script(src='/js/directives/timeline.js')
    script(src='/js/directives/history.js')
    script(src='/js/directives/popit.js')
    